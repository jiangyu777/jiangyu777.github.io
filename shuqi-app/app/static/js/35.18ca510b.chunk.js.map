{"version":3,"sources":["scripts/views/search/index.js","utils/history.js","scripts/components/Head/index.js","assets/images/home.png","utils/axios.js","utils/index.js","scripts/components/Foot/index.js"],"names":["payload","Search","todoSearch","keyword","autoFocusInst","state","value","console","log","axios","get","params","then","res","setState","data","result","this","style","background","title","show","onSubmit","placeholder","ref","map","b","i","to","_id","className","key","color","width","height","src","cover","alt","author","status","tags","Component","history","createHashHistory","Head","goback","go","gotoSearch","push","props","mode","icon","type","onLeftClick","rightContent","require","onClick","width1","module","exports","defaults","baseURL","headers","common","post","alert","failToast","msg","hide","fail","interceptors","request","use","config","loading","sessionStorage","token","error","Promise","reject","response","info","code","alertInstance","text","onPress","setTimeout","close","showAlert","Foot","gotoshuqi","backgroundColor"],"mappings":"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","file":"static/js/35.18ca510b.chunk.js","sourcesContent":["\r\n\r\nimport \"./index.scss\"\r\nimport { SearchBar, Button, WhiteSpace, WingBlank } from 'antd-mobile';\r\nimport { axios } from \"&\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Head from \"~/components/Head\";\r\nimport Foot from \"~/components/Foot\"\r\n\r\nconst payload = \"\"\r\n\r\nexport default class Search extends Component{\r\n    constructor(){\r\n        super();\r\n        this.state={\r\n            payload:[]\r\n        }\r\n    }\r\n\r\n    todoSearch=()=>{\r\n        const keyword = this.autoFocusInst.state.value;\r\n        console.log(keyword);\r\n        axios.get(\"/react/getbooks\",{params:{keyword}}).then(res=>{\r\n            this.setState({\r\n                payload:res.data.result\r\n            })\r\n            console.log(payload)\r\n        })\r\n    }\r\n\r\n    render(){\r\n        const {\r\n            payload\r\n        }=this.state\r\n        return(\r\n            <div style={{background:\"#fff\" }}>\r\n                <Head title=\"搜索\" show={true}></Head>\r\n                <WhiteSpace />\r\n              \r\n                <SearchBar onSubmit={this.todoSearch} placeholder=\"书名/作者/关键词\" ref={ref => this.autoFocusInst = ref} />\r\n                <WhiteSpace />\r\n                {\r\n                    this.state.payload.map((b,i)=>{\r\n                        return(\r\n                        <Link to={\"/book/\"+b._id}  >\r\n                           \r\n                            <div className=\"books\" key={i} style={{background:\"#fff\" ,color:\"#666\" ,width:\"100%\" ,height:\"2.34rem\" }} >\r\n                                <div>\r\n                                <img  style={{width:\"1.12rem\" , height:\"1.48rem\" }} src={b.cover} alt=\"\"/>\r\n                                </div>  \r\n                                <div style={{width:\"5.4rem\",height:\"1.52rem\"}}>\r\n                                    <p  style={{width:\"5.4rem\",height:\"0.5rem\"}} >{b.title}</p>\r\n                                    <p  style={{width:\"5.4rem\",height:\"0.5rem\"}} >\r\n                                      {b.author}   \r\n                                    </p>\r\n                                    <p style={{width:\"5.4rem\",height:\"0.5rem\"}} >\r\n                                        <span>{b.status==1?\"完结\":\"连载\"}</span>\r\n                                        <span>{\",\"+b.tags}</span>\r\n                                    </p>\r\n                                </div>\r\n                            </div>   \r\n                          \r\n                        </Link>\r\n                        )\r\n                    })\r\n                       \r\n                    \r\n                }\r\n                <Foot></Foot>\r\n            </div>\r\n        )\r\n    }\r\n}","\r\nimport {createHashHistory,createBrowserHistory} from \"history\";\r\n\r\nexport const history = new createHashHistory();\r\n\r\n// export {history};","\r\nimport \"./index.scss\"\r\n\r\nimport {NavBar,Icon} from \"antd-mobile\"\r\n\r\n\r\nimport {history} from \"&/history\";\r\n\r\nexport default class Head extends Component{\r\n\r\n    goback=(show)=>{\r\n        if(show){\r\n            \r\n            history.go(-1);\r\n        }\r\n    }\r\n\r\n    gotoSearch=()=>{\r\n        history.push(\"/home\");\r\n    }\r\n\r\n    render(){\r\n        const {\r\n            show,\r\n        \r\n        }  = this.props;\r\n        return(\r\n            <NavBar\r\n                className=\"head\"\r\n                mode=\"dark\"\r\n                icon={show&&<Icon style={{color:\"#00c98d\"}} type=\"left\" />}\r\n                onLeftClick={ ()=>this.goback(show) }\r\n                rightContent={[\r\n                    <img src={require(\"@/assets/images/home.png\")}  onClick={this.gotoSearch}  style={{ width1:\"0.4rem\" , height:\"0.4rem\" }} />,\r\n                  \r\n                ]}\r\n            >{this.props.title}</NavBar>\r\n        )\r\n    }\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/home.48a04f55.png\";","\r\n\r\n\r\nimport axios from \"axios\";\r\n\r\n// axios.defaults.baseURL = \"http://localhost:1906/\";  //开发环境\r\naxios.defaults.baseURL = \"https://jiangyu777.com:1906/\";    // 线上环境\r\n  \r\nlet token = \"\";\r\naxios.defaults.headers.common['token'] = token;    // token \r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n\r\nimport {Toast,Modal } from \"antd-mobile\"\r\nimport {history} from \"&/history\"\r\n\r\nconst alert = Modal.alert;\r\nconst showAlert = () => {\r\n    const alertInstance = alert('登录提示', '你确定是否前往登陆', [\r\n      { text: '我就看看', onPress: () => console.log('游客访问'), style: 'default' },\r\n      { text: '马上登录', onPress: () => history.push(\"/login\") },\r\n    ]);\r\n    setTimeout(() => {\r\n      // 可以调用close方法以在外部close\r\n      console.log('auto close');\r\n      alertInstance.close();\r\n    }, 500000);\r\n};\r\n\r\nexport function loadingToast(msg) {\r\n    Toast.hide();\r\n    Toast.loading(msg, 1, () => {\r\n      console.log('Load complete !!!');\r\n    });\r\n}\r\n\r\nexport function failToast(msg) {\r\n    Toast.hide();\r\n    Toast.fail(msg, 1);\r\n}\r\n\r\nexport function showToast(msg) {\r\n    Toast.hide();\r\n    Toast.info(msg, 1);\r\n}\r\n\r\n\r\n// 拦截器配置    Interceptors \r\n// 发送请求之前 添加拦截器  \r\naxios.interceptors.request.use(function (config) {\r\n    // 发送之前做的事情 \r\n    loadingToast(\"请求中\");\r\n    config.headers['token'] =  sessionStorage.token;\r\n    console.log(config);\r\n\r\n    return config;\r\n}, function (error) {\r\n    // 发送失败 做的失败 \r\n    failToast(\"请求失败\")\r\n    return Promise.reject(error);\r\n});\r\n\r\n// 响应数据 的拦截器 \r\naxios.interceptors.response.use(function (response) {\r\n    // 成功接收到数据 \r\n    console.log(response);\r\n    // setTimeout(()=>{\r\n        showToast(response.data.msg);\r\n        if(response.data.code==500){\r\n            showAlert();\r\n        }\r\n    // },10)\r\n    return response;\r\n}, function (error) {\r\n    failToast(\"响应失败\");\r\n    // 无法接收到数据  \r\n    return Promise.reject(error);\r\n});\r\n\r\n\r\nexport  {axios};\r\n","\r\n\r\n\r\n//commonJS 规范 \r\n//export default\r\n//\r\n\r\n\r\n\r\nimport url from \"url\";\r\n\r\nexport function getQuery(search){\r\n    return url.parse(search,true).query;\r\n}\r\n\r\nexport {axios} from \"./axios\";","\r\n\r\nimport \"./index.scss\";\r\n\r\nimport { Button, WhiteSpace, WingBlank } from 'antd-mobile';\r\nimport {history} from \"&/history\";\r\n\r\nexport default class Foot extends Component{\r\n\r\n    gotoshuqi=()=>{\r\n        history.push(\"/experience\")\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"foots\">\r\n               <Button  onClick={this.gotoshuqi} style={{backgroundColor:\"#00c98d\"}} type=\"primary\">下载书旗小说客户端</Button>\r\n               <p className=\"bs-slogan\">海量图书，更高品质阅读体验</p>\r\n               <p>©2016书旗网shuqi.com</p>\r\n               <p>粤ICP备13078413号-1</p>\r\n               <p className=\"logo\">\r\n                    <span>\r\n                        <img style={{width:\"0.4rem\"}} src=\"http://c-shuqi.11222.cn/assets/coryright-wen_ed9939e.png\" alt=\"\"/>\r\n                    </span>\r\n                    <span>网络文化经营许可证：粤网文[2017]3018-499号</span>\r\n                </p>\r\n                <p>增值电信业务经营许可证：粤B2-20130742</p>\r\n                <p>广州阿里巴巴文学信息技术有限公司 版权所有</p>\r\n                <p>广州市天河区黄埔大道西平云路163号广电平云广场B塔13层自编03单元</p>\r\n                <p>0571-26883636</p>\r\n           \r\n           \r\n            </div>\r\n\r\n        )\r\n    }\r\n}"],"sourceRoot":""}